webpackJsonp([0],{236:function(n,l,e){"use strict";function t(n){return c._22(0,[(n()(),c._20(-1,null,["\n\n\t"])),(n()(),c.Z(1,0,null,null,2,"button",[["full",""],["ion-button",""],["round",""]],null,[[null,"tap"]],function(n,l,e){var t=!0;if("tap"===l){t=!1!==n.component.prepareBarcodeScanner()&&t}return t},V.b,V.a)),c.Y(2,1097728,null,0,Y.a,[[8,""],k.a,c.j,c.z],{round:[0,"round"],full:[1,"full"]},null),(n()(),c._20(-1,0,["\n      barcode scanner\n    "]))],function(n,l){n(l,2,0,"","")},null)}function a(n){return c._22(0,[(n()(),c.Z(0,0,null,null,2,"button",[["full",""],["ion-button",""],["round",""]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.captureVideo()&&t}return t},V.b,V.a)),c.Y(1,1097728,null,0,Y.a,[[8,""],k.a,c.j,c.z],{round:[0,"round"],full:[1,"full"]},null),(n()(),c._20(-1,0,["Capture Video"]))],function(n,l){n(l,1,0,"","")},null)}function o(n){return c._22(2,[c._18(402653184,1,{_fixedContent:0}),c._18(402653184,2,{_scrollContent:0}),(n()(),c.Z(2,0,[[1,0],["fixedContent",1]],null,1,"div",[["class","fixed-content"]],null,null,null,null,null)),c._10(null,0),(n()(),c.Z(4,0,[[2,0],["scrollContent",1]],null,1,"div",[["class","scroll-content"]],null,null,null,null,null)),c._10(null,1),c._10(null,2)],null,null)}function u(n){return c._22(0,[(n()(),c.Z(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),c._20(-1,null,["\n        "])),(n()(),c.Z(2,0,null,null,1,"media-capture",[],null,[[null,"MediaCaptureEvent"]],function(n,l,e){var t=!0;if("MediaCaptureEvent"===l){t=!1!==n.component.getVideoData(e)&&t}return t},a,x)),c.Y(3,49152,null,0,v,[m.a,g.a],null,{MediaCaptureEvent:"MediaCaptureEvent"}),(n()(),c._20(-1,null,["\n    "]))],null,null)}function i(n){return c._22(0,[(n()(),c.Z(0,0,null,null,10,"ion-item",[["class","item item-block"],["tappable",""],["text-wrap",""]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.play(n.context.$implicit)&&t}return t},I.b,I.a)),c.Y(1,1097728,null,3,P.a,[J.a,k.a,c.j,c.z,[2,N.a]],null,null),c._18(335544320,1,{contentLabel:0}),c._18(603979776,2,{_buttons:1}),c._18(603979776,3,{_icons:1}),c.Y(5,16384,null,0,X.a,[],null,null),(n()(),c._20(6,2,["\n            ","\n            "])),(n()(),c.Z(7,0,null,2,2,"p",[],null,null,null,null,null)),(n()(),c._20(8,null,[""," MB"])),c._15(9,1),(n()(),c._20(-1,2,["\n        "]))],null,function(n,l){n(l,6,0,l.context.$implicit.name);n(l,8,0,c._21(l,8,0,n(l,9,0,c._11(l.parent,0),l.context.$implicit.size/1e3/1e3)))})}function r(n){return c._22(0,[c._13(0,L.d,[c.r]),(n()(),c.Z(1,0,null,null,15,"ion-content",[["overflow-scroll","true"],["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,o,W)),c.Y(2,4374528,null,0,R.a,[k.a,$.a,A.a,c.j,c.z,U.a,H.a,c.u,[2,Q.a],[2,T.a]],null,null),(n()(),c._20(-1,1,["\n\n    "])),(n()(),c.Z(4,0,null,1,1,"barcode-scanner",[],null,[[null,"BarcodeScannerEvent"]],function(n,l,e){var t=!0;if("BarcodeScannerEvent"===l){t=!1!==n.component.getBarcodeData(e)&&t}return t},t,O)),c.Y(5,49152,null,0,_,[p.a],null,{BarcodeScannerEvent:"BarcodeScannerEvent"}),(n()(),c._20(-1,1,["\n\n    "])),(n()(),c.U(16777216,null,1,1,null,u)),c.Y(8,16384,null,0,L.j,[c.I,c.F],{ngIf:[0,"ngIf"]},null),(n()(),c._20(-1,1,["\n\n    "])),(n()(),c.Z(10,0,null,1,5,"ion-list",[],null,null,null,null,null)),c.Y(11,16384,null,0,q.a,[k.a,c.j,c.z,$.a,G.l,A.a],null,null),(n()(),c._20(-1,null,["\n        "])),(n()(),c.U(16777216,null,null,1,null,i)),c.Y(14,802816,null,0,L.i,[c.I,c.F,c.p],{ngForOf:[0,"ngForOf"]},null),(n()(),c._20(-1,null,["\n    "])),(n()(),c._20(-1,1,["\n\n"]))],function(n,l){var e=l.component;n(l,8,0,e.showMedia);n(l,14,0,e.mediaFiles)},function(n,l){n(l,1,0,c._11(l,2).statusbarPadding,c._11(l,2)._hasRefresher)})}Object.defineProperty(l,"__esModule",{value:!0});var c=e(0),s=(e(3),e(111),e(116),e(115)),d="mediaFiles",f=function(){function n(n,l,e,t){this.navCtrl=n,this.navParams=l,this.storage=e,this.streamingMedia=t,this.mediaFiles=[],this.showMedia=!1}return n.prototype.ionViewDidLoad=function(){},n.prototype.ngOnInit=function(){var n=this;this.storage.get(d).then(function(l){n.mediaFiles=JSON.parse(l)||[],console.log(n.mediaFiles)})},n.prototype.getBarcodeData=function(n){var l=this;console.log(n),this.BarcodeScannerData=n,this.storage.get(d).then(function(n){if(l.mediaFiles=JSON.parse(n)||[],console.log(l.mediaFiles),l.mediaFiles.length>0){var e=l.mediaFiles.find(function(n){return n.barcodeId===l.BarcodeScannerData.text});console.log(e),void 0!==e?(l.showMedia=!1,console.log("this barcode already used before")):(l.showMedia=!0,console.log("new barcode"))}else l.showMedia=!0,console.log("new barcode")})},n.prototype.getVideoData=function(n){console.log(n),this.storeMediaFiles(n)},n.prototype.play=function(n){var l={successCallback:function(){console.log("Video played")},errorCallback:function(n){console.log("Error streaming")},orientation:"landscape",shouldAutoClose:!0,controls:!0};this.streamingMedia.playVideo(cordova.file.dataDirectory+n.name,l)},n.prototype.storeMediaFiles=function(n){var l=this;n[0]={name:n[0].name,size:n[0].size,barcodeId:this.BarcodeScannerData.text},this.storage.get(d).then(function(e){if(e){var t=JSON.parse(e);t=t.concat(n),l.storage.set(d,JSON.stringify(t))}else l.storage.set(d,JSON.stringify(n));l.mediaFiles=l.mediaFiles.concat(n),l.showMedia=!1})},n}(),p=e(112),_=function(){function n(n){this.barcodeScanner=n,this.BarcodeScannerEvent=new c.l}return n.prototype.prepareBarcodeScanner=function(){var n=this;this.barcodeScanner.scan({preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,torchOn:!1,prompt:"Place a barcode inside the scan area",resultDisplayDuration:500,formats:"QR_CODE,PDF_417",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!0}).then(function(l){alert("Result: "+l.text+"\nFormat: "+l.format+"\n"),n.BarcodeScannerEvent.emit(l)}).catch(function(n){console.log("Error",n),alert("Scanning failed: "+n)})},n}(),h=function(){return function(){}}(),m=e(113),g=e(114),v=function(){function n(n,l){this.mediaCapture=n,this.file=l,this.MediaCaptureEvent=new c.l}return n.prototype.ionViewDidLoad=function(){},n.prototype.captureVideo=function(){var n=this;this.mediaCapture.captureVideo({limit:1,duration:30}).then(function(l){var e=l[0],t=e.name,a=e.fullPath.split("/");a.pop();var o=a.join("/"),u=cordova.file.dataDirectory;n.file.copyFile(o,t,u,t).then(function(l){n.MediaCaptureEvent.emit([{name:t,size:e.size,barcodeId:""}])},function(n){console.log("err: ",n)})},function(n){return console.error(n)})},n}(),b=function(){return function(){}}(),y=function(){return function(){}}(),F=e(190),S=e(191),C=e(192),M=e(193),B=e(194),E=e(195),w=e(196),D=e(197),Z=e(199),V=e(40),Y=e(19),k=e(1),O=c.X({encapsulation:2,styles:[],data:{}}),j=c.V("barcode-scanner",_,function(n){return c._22(0,[(n()(),c.Z(0,0,null,null,1,"barcode-scanner",[],null,null,null,t,O)),c.Y(1,49152,null,0,_,[p.a],null,null)],null,null)},{},{BarcodeScannerEvent:"BarcodeScannerEvent"},[]),x=c.X({encapsulation:2,styles:[],data:{}}),z=c.V("media-capture",v,function(n){return c._22(0,[(n()(),c.Z(0,0,null,null,1,"media-capture",[],null,null,null,a,x)),c.Y(1,49152,null,0,v,[m.a,g.a],null,null)],null,null)},{},{MediaCaptureEvent:"MediaCaptureEvent"},[]),I=e(198),P=e(18),J=e(14),N=e(41),X=e(71),L=e(16),R=e(21),$=e(4),A=e(9),U=e(8),H=e(35),Q=e(5),T=e(20),W=c.X({encapsulation:2,styles:[],data:{}}),q=e(52),G=e(7),K=e(10),nn=e(117),ln=c.X({encapsulation:2,styles:[],data:{}}),en=c.V("page-home",f,function(n){return c._22(0,[(n()(),c.Z(0,0,null,null,1,"page-home",[],null,null,null,r,ln)),c.Y(1,114688,null,0,f,[T.a,K.a,nn.a,s.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),tn=e(17),an=e(118),on=e(36);e.d(l,"HomePageModuleNgFactory",function(){return un});var un=c.W(y,[],function(n){return c._7([c._8(512,c.i,c.S,[[8,[F.a,S.a,C.a,M.a,B.a,E.a,w.a,D.a,Z.a,j,z,en]],[3,c.i],c.s]),c._8(4608,L.l,L.k,[c.r,[2,L.t]]),c._8(4608,tn.k,tn.k,[]),c._8(4608,tn.c,tn.c,[]),c._8(512,L.b,L.b,[]),c._8(512,tn.j,tn.j,[]),c._8(512,tn.d,tn.d,[]),c._8(512,tn.i,tn.i,[]),c._8(512,an.a,an.a,[]),c._8(512,an.b,an.b,[]),c._8(512,h,h,[]),c._8(512,b,b,[]),c._8(512,y,y,[]),c._8(256,on.a,f,[])])})}});